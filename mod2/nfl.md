__Non-context-free Languages__

_ict chapter 16_


â˜¯ Theorem 1 
---
Given a CFG G in CNF form, we name
- `Nonterminal â†’ Nonterminal Nonterminal` as `live` production
- `Nonterminal â†’ terminal` as `dead` production

then only `finitely` many words can be generated if the live productions can be applied `at most once each`.

Proof: 
- in the working string
  - applying a `live` production `increase` the `number of nonterminals` by `one`
  - applying a `dead` production `decrease` the `number of nonterminals` by `one`
- âˆµ the net result of a derivation is to `start with one nonterminal S` and `end up with a word of solid terminals with zero nonterminals`
  - the net effect is to lose a nonterminal
- âˆ´ to get a string of only terminals, one more dead production than live proÂ­duction must be applied no matter in what order the productions are applied.
- Suppose G has exactly p live productions and q dead productions
  - âˆµ any derivation not reuse a live production can have at most p live producÂ­tions, it must have at most (p + 1 ) dead productions
  - âˆ´  all words generated from G withÂ­out repeating any live productions have at most ( p + 1 ) letters in them
    - i.e. there can be at most finitely many of them


ğŸ’¡ Demo 1
---
Given CFG: 
- S â†’ AB
- A â†’ XY
- X â†’ b
- Y â†’ SX

| working string | production applied | `# of live production` | `# of dead production` |
|:--:|:--:|:--:|:--:|
| â‡’S | start | 0 | 0 |
| Sâ‡’AB | S â†’ AB | 1 |  0 |
| Sâ‡’XYB | A â†’ XY | 1 |  0 |
| Sâ‡’bYB | X â†’ b | 0 |  1 |
| Sâ‡’bSXB | Y â†’ SX | 1 |  0 |


ğŸ’¡Demo 2
---
- A CNF production replaces every nonterminal with `one or two symbols`
- the derivation tree of each word has the property that
  - every mode has `one or two descendants`
- Such a tree is called a binary tree
- case 1 (p4): the second Z is a `descendant` of itself
- case 2 (p5): the second B is NOT a `descendant` of itself


ğŸ’¡Demo 3
---
- Given a derivation tree of an CFG in CNF (p6)
  - If the bottom row has more than 2áµ– letters, 
  - the tree must have more than p  rows.
- Given p different live productions possible in the grammar, p=5 here
  - Y â†’ a
  - X â†’ BY
  - S â†’ XY
  - B â†’ SX
  - X â†’ BY
  - S â†’ XY
- (p7)
  - if more than p have been used in a path
  - then some live productions have been used more than once


â˜¯ Theorem 2
---
Given a CFG G in CNF form with p live productions and q dead productions, 
- if w is a word generated by G of length > 2áµ– letters, 
- then `somewhere` in `every derivation tree for w` there is an example of some nonterminal Z being used twice where the second Z is `descended` from the first Z
- such Z is said to be `self-embedded`
- Generally, in any CFG all sufficiently long words have leftmost deÂ­rivations that include a self-embedded nonterminal

Proof:
- length(w)>2áµ– ensures that the production tree for w has more than p rows, i.e p productions, so some live productions have been used more than once
- the nonterminal on the left side of this repeated live production has the property that it occurs twice (or more) on the descent line from S to a terminal in w.





ğŸ Example 1
---
Consider the CFG for NONULLPALINDROME in CNF:
- Sâ†’AX|BY|AA|BB|a|b
- Xâ†’SA
- Yâ†’SB
- Aâ†’a
- Bâ†’b

there are 6 live productions and 4 dead productions. According to Theorem 2, it would require a word of more than 2â¶ = 64 letters to `guarantee` that each derivation has a self-embedded nonterminal in it.

NONULLPALINDROME has words shorter than 6 letters with self-embedding nonterminal such as `aabaa` (p8):
- `Xâ†’SA` is used twice in this tree segment

```mermaid
flowchart TB
  p0((S))-->p00((A))-->p000((a))
  p0((S))-->p01((X))
  p01((X))-->p010((S))-->p0100((A))-->p01000((a))
  p01((X))-->p011((A))-->p0110((a))
  p010((S))-->p0101((X))-->p01010((S))-->p010100((b))
  p0101((X))-->p01011((A))-->p010110((a))
```
- This tree has six levels, so it cannot quite guarantee a self-embedded nonterminal, but it has one anyway such as X and S
- the second X can begin a subtree exactly like the first X, and this procedure can be repeated infinitely (p1-3)
- Sâ‚â†’Sâ‚‚â†’Sâ‚ƒâ†’â‹¯â†’Sâ‚™ can be short-noted as `Sâ‚âŠ¨Sâ‚™` or ${S_1 \stackrel{*}{â‡’} S_n}$
  - `Sâ‚ can eventually produce Sâ‚™`
  - ex1. N is nullable if N âŠ¨ Îµ
  - ex2. N is self-embedded in the derivation of word w when there are strings of terminals v and y not both null, such that N âŠ¨ vNy

ğŸ Example 2
---
Given CFL1 generated by CFG1:
- S â†’ AB
- A â†’ BC
- C â†’ AB
- A â†’ a
- B â†’ b

and one of its possible derivation tree (p9â‘ )
- A is `self-embedded`
- the subtree rooted at A can be repeated any number of times (p9â‘¡)
  - all the new and longer words generated this way âˆˆ CFL1


â˜¯ Theorem 3: The pumping lemma for CFLs
---
If G is any CFG in CNF with p live productions and w is any word generated by G with length greater than 2áµ–, then we can break up w into five substrings:
- `w = uvxyz`

such that 
- x â‰  Îµ
- v and y are not both Îµ
- `uvâ¿xyâ¿z` (n=1,2,3,â‹¯) can also be generated by G.

Proof ğŸ…°:
- if length(w)>2áµ–, then there are always `self-embedded nonterminals` in `any derivation tree for w`.
- given such as derivation tree and one self-embedded nonterminals P whose first production is Pâ†’QR (p10â‘ )
- the triangle in (p10)  encloses the whole part of the tree generated from the `first P` down to where the `second P` is produced, divide w into these five parts (p10â‘¡)
  - `u` = the substring of all the letters of w generated `to the left of the triangle` above, it could be Îµ
  - `v` = the substring of all the letters of w descended from the first P but `to the left of the letters generated by the second P`, it could be Îµ
  - `x` = the substring of w descended from the second P
    - this can not be Îµ because this nonterminal must turn into some terminals
  - `y` = the substring of w of all letters generated by the first P but `to the right of the letters descending from the second P`
    - it could be Îµ `but not if v=Îµ`
  - `z` = the substring of all the letters of w generated `to the right of the triangle`
  - such as (p10â‘¢, p11, p12)
- reiterating the productions inside the triangle n times generates `uvâ¿xyâ¿z` (p13)


Proof ğŸ…±:
- If P is a self-embedded nonterminal in the derivation of w, then there are substrings u,v,xâ‰ Îµ,y,z, and v,y are not both Îµ, such that
  - S âŠ¨ uPz
  - P âŠ¨ vPy
  - P âŠ¨ x

- âˆ´ 
  - S âŠ¨ uPz âŠ¨ uvPyz âŠ¨ uvâ¿Pyâ¿z âŠ¨ uvâ¿xyâ¿z

`Application`:
- mainly used to prove certain languages are not context-free, or
  - they are `non-context-free`


ğŸ’¡ Demo 4
---
Given a CFG G in CNF:
- Sâ†’PQ
- Qâ†’QS | b
- Pâ†’a

word `abab` can be derived from G (p14â‘ )
- there are 3 instances of self-embedded nonterminals
- such as self-embedded nonterminal Q (p14â‘¡)
  - (u,v,x,y,z)=(a,Îµ,b,ab,Îµ)
- repeat the self-embedding twice (p15)
  - (u,vÂ²,x,yÂ²,z)=(a,Îµ,b,(ab)Â²,Îµ)
- repeat the self-embedding three times (p16)
  - (u,vÂ³,x,yÂ³,z)=(a,Îµ,b,(ab)Â³,Îµ) 
- repeat the self-embedding n times (p17)
  - (u,vâ¿,x,yâ¿,z)=(a,Îµ,b,(ab)â¿,Îµ)


ğŸƒ Application 1
---
Prove language L = {aâ¿bâ¿aâ¿, n=1,2,3,â‹¯} is non-context-free
- idea: given a word wâˆˆL long enough to apply Theorem 1, 
  - `exhaust all partition schemes` of w = uvxyz
  - but uvÂ²xyÂ²z âˆ‰ L which `breaks the general word structure`
- the structure characteristics in the general word aâ¿bâ¿aâ¿
  - â¶ there is exactly on substring `ab`, and `ba`
    - if either v or y contains `ab` or `ba`
    - uvÂ²xyÂ²z has one more such substring broken â¶ 
  - â· there are twice a's of b's with all b's in the middle and equal number of a's on each side of those b's
    - other partitions could only results in that v and y must be all a's, all b's or Îµ, but if v and y are blocks of one letter
    - then uvÂ²xyÂ²z breaks â·
- âˆ´ L is non-context-free


ğŸƒ Application 2
---
Prove language L = {aâ¿bâ¿câ¿, n=1,2,3,â‹¯} is non-context-free
- same idea as above
- the structure characteristics in the general word aâ¿bâ¿câ¿
  - â¶ there is only one substring `ab` and `bc`
  - â· no these substrings: `ac,ba,ca,cb`
  - â¸ there are equal number of a's, b's and c's
- if v or y is not a solid block of one letter (or Îµ), then uvÂ²xyÂ²z would have more of some of the two-letter substrings `ab, ac, ba, be, ca, cb`
- otherwise if v and y are solid blocks of one letter (or Îµ), then uvÂ²xyÂ²z would break â¸
- âˆ´ L is non-context-free


â˜¯ Theorem 4: The pumping lemma for RLs
---
- If w is a word in a `regular language L` and w is `long enough`
- then w can be decomposed into `three` parts: 
  - `w = xyz` and `yâ‰ Îµ`, such that all the words `xyâ¿z` must also be in L
- `idea`: w is longer than the number of states of an FA that accepts this RL such that w contains an `infinitely repeatable circuit`


â˜¯ Theorem 5: The pumping lemma for CFLs
---
- If w is a word in a `context-free language L` and w is `long enough`
- then w can be decomposed into `five` parts: 
  - `w = uvxyz`, such that all the words `uvâ¿xyâ¿z` must also be in L
  - where `xâ‰ Îµ, v and y are not both Îµ`
- `idea`:  the derivaÂ­tion for w must be so long that it contains an `infinitely repeatable sequence of productions`


â˜¯ Theorem 6: The pumping lemma for CFLs with length
---
Let L be a CFL in CNF with p live productions.
- Then any word w in L with length > 2áµ– can be broken into five parts: 
  - `w = uvxyz`
- such that
  - length(vxy) â‰¤ 2áµ–
  - length(x) > 0, i.e. xâ‰  Îµ
  - length(v) + length(y) > 0, i.e. v and y are not both Îµ
- and such that all the words `uvâ¿xyâ¿z âˆˆ L`


ğŸƒ Application 3
---
Show language L = {aâ¿báµaâ¿báµ}, n and m are both positive integers, is `non-context-free`.
- This can't be shown by Theorem 1 since
  - w=(u,v,x,y,z) = (Îµ, aáµ, bâ±, aáµ, bâ±) can be pumped to
  - (u,vâ¿,x,yâ¿,z) = (Îµ, (aáµ)â¿, bâ±, (aáµ)â¿, bâ±) âˆˆ L
- Show by `the pumping lemma for CFLs`:
  - suppose L can be generated by a CFG with p live productions
  - take word ${ a^{2^p}b^{2^p}a^{2^p}b^{2^p} }$ which is long enough to apply the theorem,
    - length(vxy) < 2áµ–
  - first v and y `cannot be solid blocks of one letter` separated by a clump of the other letter since the separator letter clump has length 2áµ– > length(vxy)
  - next v and y can't contain substring `ab` or `ba` otherwise
    - uvÂ²xyÂ²z breaks the word structure
  -  v and y must be `one solid letter` from any of the four clumps, then uvÂ²xyÂ²z breaks the word structure again
- âˆ´ L is `non-context-free`


ğŸƒ Application 4
---
Show the language DOUBLEWORD
- = {ss, s is  any string of a 's and b's}
- = {Îµ,aa, bb, aaaa, abba, baba, bbbb, â‹¯} 

is `non-context-free`.

- Show by `Theorem 4`: again suppose L can be generated by a CFG with p live productions, then any word with length greater than 2áµ– can be pumped:
  - let n>2áµ– and w = uvxyz = aâ¿bâ¿aâ¿bâ¿ âˆˆ DOUBLEWORD
  - and length(vxy) < 2áµ– < n
- If `vxy` is contained entirely in one solid letter clump
  - then uvÂ²xyÂ²z breaks the word pattern
- if `vxy` spans two clumps of letters (âš ï¸ not long enough to span three clumps), i.e. `vxy` contains `ab` or `ba`
  - again uvÂ²xyÂ²z breaks the word pattern based on the argument cases
  - â¶ the substring `ab` or `ba` is not completely inside any of the parts v, x, or y but lies between them
  - â· the substring `ab` or `ba` is completely inside any of the parts v, x, or y
- âˆ´ L is `non-context-free`