__CFL decidability__

_ict chapter 18_


Undecidable questions about CFGs
---
Given two CFLs L₁ and L₂ generated by CFGs G₁ and G₂ respectively, 
1. `Equivalence`: 
   - How can we tell whether or not G₁ and G₂ define the same language?
   - i.e. is `L₁ = L₂`?
2. `Ambiguity`: 
   - How can we tell whether or not G₁ is ambiguous?
3. `Ambiguity elimination`: 
   - Given an `ambiguous CFG A`, how can we tell whether or not there is an `unambiguous CFG U` that generates the same language?
4. `CFL complement`
   - How can we tell whether or not the `complement of a given CFL` is also context-free?
5. `CFL intersection`
   - How can we tell whether or not the `intersection of two CFLs` is also context-free?
6. `Intersection emptiness`
   - How can we tell whether or not L₁ and L₂ have a word in common?
   - i.e. is L₁ ∩ L₂ = Φ
7. `Non-generatability`
   - How can we tell whether or not there are any words that G₁ `does not` gener­ate?
   - i.e. is L₁ = (a + b)*?
- It had been proved that `no algorithm can exist` to answer these questions


Decidable questions about CFGs
---
Given the CFL L₁ generated by a CFG G₁, and a particular string w
1. `emptiness`:
   - can we tell whether or not G₁ generates any words at all? 
   - i.e. is L₁ `empty`?
2. `finiteness`:
   - can we tell whether or not L₁ is finite or infinite?
   - i.e. is |L₁| ≤ M? 
     - M is a large enough positive number.
3. `membership`:
   - can we tell whether or not w can be generated by G₁?
   - i.e. is w ∈ L₁?



☯ Theorem 1: The `emptiness` of any CFG is `decidable`
---
Given CFL L generated by CFG G, `there is an algorithm` to determine
- `whether or not it can generate any words at all`
- i.e. `whether or not L=Φ`

Prove by construction:
- if S ⊨ ε, then L ≠ Φ
- if S ⊭ ε, G can be converted to CNF
  - if there is a production S → t and `t is a terminal`, then t ∈ L
  - if there is no such productions, go through the following algorithm
  - ❶ eliminate nonterminal N
    - N has some productions of the form N → w and `w is a terminal or string of terminals`
    - keep one of these productions and delete all other productions with N on their left
    - replace all Ns on the right side of the remaining productions by w
    - the new CFG G' may no longer be in CNF nor generate the same CFL as G, but
      - Every word that can be generated from G' could have been generated by G 
      - If G generated any words, then G' does also
  - ❷ Repeat ❶ until either it eliminates S or it eliminates no new nonterminals.
    - If S has been eliminated, then the G produces some words; 
    - if not, then it does not. 
      - Because if there were any words in the language, we could retrace the tree from any word and follow the path back to S (p1)
        - A → a
        - B → a | b
        - Y → BB
        - X → AY
        - S → XY
  - the productions in G is finite, so is ❶ and this algorithm


🍎 Example 1
---
- Decide the emptiness of the CFG below
  - S → XY
  - X → AX | AA
  - Y → BY | BB
  - A → a
  - B → b
- Solution
  - A → a, X → AX | AA ⊢ X → aX | aa ⊢ X → aa
    - `⊢` denote its LHS is `reduced` to its RHS
  - B → b, Y → BY | BB ⊢ Y → bY | bb ⊢ Y → bb
  - S → XY, X → aa, Y → bb ⊢ S → aabb ⊢ aabb
  - S is deleted so the CFG produces at least one word `aabb`


🏃 Exercise 1
---
- Decide the emptiness of the CFG below
  - S → XY
  - `X → AX`
  - Y → BY | BB
  - A → a
  - B → b
- Solution
  - A → a, X → AX ⊢ `X → aX`
  - B → b, Y → BY | BB ⊢ Y → bY | bb ⊢ Y → bb
  - S → XY, Y → bb ⊢ `S → Xbb` 
  - S is still there so the CFG produces no word


☯ Theorem 2: Uselessness is decidable
---
There is an algorithm to decide whether or not `a given nonterminal X in a given CFG is ever used` in the generation of words.
- A nonterminal that `cannot be used in a production of a word` is called `useless`
  
Prove by showing the a word can be derived from S passing X:
- ❶ X ⊨ a string of terminals
  - An `unproductive nonterminal` cannot ever produce a string of terminals
- ❷ S ⊨ a working string involving X

Algorithm of deciding X's uselessness:
- ① Purify the grammar by `eliminating` productions involving `unproductive` nonterminals.
  - If all X's are removed then X is useless
- ② Mark all X's
- ③ If any nonterminal is the LHS of a production with anything marked on the right, mark it, and mark all occurrences of it throughout the grammar
- ④ Repeat step ③ until nothing new is marked
- ⑤ If S is marked, X is a useful member of the CFG otherwise it is useless


🍎 Example 2
---
Decide the uselessness of each nonterminal in the CFG below
- S→ABa | bAZ | b
- A→Xb | bZa
- B→bAA
- X→aZa | aaa
- Z→ZAbA

- S is not useless
  - S ⊨ b
- A is not useless
  - A→Xb, X→aaa ⊢ A⊨(aaa)b=aaab
  - S→ABa, B⊨baaabaaab ⊢ S⊨A(baaabaaab)(a)
- B is not useless
  - B→bAA, A⊨aaab ⊢ B⊨(b)(aaab)(aaab) = baaabaaab
  - S→ABa, A⊨aaab ⊢ S⊨(aaab)B(a)
- X is not useless
  - X ⊨ aaa
  - S→ABa, A→Xb, B⊨baaabaaab ⊢ S ⊨ Xb(baaabaaab)(a)
- Z is useless
  - S→bAZ, A⊨aaab ⊢ S ⊨ b(aaab)Z
  - but Z→ZAbA,A⊨aaab ⊢ Z ⊨ Z(aaab)(b)(aaab) ⊭ all terminals


☯ Theorem 3: finiteness is decidable
---
There is an algorithm to decide whether a given CFG generates an infinite language or a fi­nite language.


☯ Theorem 4: membership is decidable
---
Given a CFG and a string x in the same alphabet, we can decide whether or not x can be gen­erated by the CFG.